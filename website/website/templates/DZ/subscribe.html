{% extends 'base.html' %}
{% load static %}
{% block title %}Information{% endblock %}

{% block meta %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="autor" content="Serepok" />
    <meta name="desctiption" content="Подобие сайта ИМКТ." />
    <meta name="keywords" content="">
    <link rel="shortcut icon" href="{% static 'img/favicon.png' %}" type="image/x-icon" />
{% endblock %}
<!-- IconFont and Stylesheet -->
{% block link %}
    <!--include bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <!--include css and js-->
    <link rel="stylesheet" href="{% static 'css/my_style.css' %}" />
    <script src="{% static 'js/script.js' %}"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel="stylesheet">
{% endblock %}
{% block content %}
    <header>
        {% include "header.html" %}
    </header>
    <body>
    {% include "navbar.html" %}

    <div class="row my-center my-container" style="background: url({% static 'img/digital.png' %}) no-repeat center; padding: 2em;">
        <div><h1 class="my-h">RUSSKY DIGITAL</h1></div>

        <div class="form-floating col-10" id="mail-inp">
          <input type="email" class="my-form col-12" id="floatingInput" placeholder="name@example.com">
        </div>
        <button class="my-button col-11" id="button-inp" onclick="subscribe()">Подписаться на новостную рассылку</button>

        <div class="col-8 my-center my-thx" id="thx-id">
            <p class="my-center my-thx">Спасибо за подписку</p>
        </div>
    </div>

    <script>
		function start_page(){
            // Hide elements on page
            document.getElementById("thx-id").style.display = "none";
		}
        start_page()
        function subscribe(){
            var text = document.getElementById("floatingInput").value;
            var data = new FormData();
            data.append('text', text);

            $.ajax({
                type: "POST",
                url: "{% url 'subscribe_submit' %}",
                data: data,
                processData: false,
                contentType: false,
                success: function(response) {
                    // Обработка успешного ответа от сервера
                    console.log(response);
                    // Hide elements on successful response
                    document.getElementById("button-inp").style.display = "none";
                    document.getElementById("mail-inp").style.display = "none";
                    document.getElementById("thx-id").style.display = "block";
                },
                error: function(error) {
                    // Обработка ошибки
                    console.log(error);
                }
            });
		}
	</script>
    <!-- Javascript Inc-->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js'></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"/>

    </body>
    {% include "footer.html" %}

{% endblock %}